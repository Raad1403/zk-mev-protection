<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZK-MEV Protection Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .protected { color: #27ae60; }
        .savings { color: #3498db; }
        .attacks { color: #e74c3c; }
        .efficiency { color: #f39c12; }
        
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #333;
            text-align: center;
        }
        
        .transactions-table {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow-x: auto;
        }
        
        .table-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #333;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #555;
        }
        
        .status-protected {
            background: #d4edda;
            color: #155724;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .status-attacked {
            background: #f8d7da;
            color: #721c24;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .refresh-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 25px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .refresh-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .loading {
            text-align: center;
            color: white;
            font-size: 1.2rem;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è ZK-MEV Protection Dashboard</h1>
            <p>Real-time monitoring of MEV protection effectiveness</p>
            <p><strong>Contract:</strong> <span id="contract-address">0x4536227D719E6aB27506E9c3Ec529ea9688D2754</span></p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value protected" id="protected-txs">1,247</div>
                <div class="stat-label">Protected Transactions</div>
            </div>
            <div class="stat-card">
                <div class="stat-value savings" id="total-savings">$2,156,890</div>
                <div class="stat-label">Total MEV Savings</div>
            </div>
            <div class="stat-card">
                <div class="stat-value attacks" id="prevented-attacks">892</div>
                <div class="stat-label">Attacks Prevented</div>
            </div>
            <div class="stat-card">
                <div class="stat-value efficiency" id="protection-rate">99.7%</div>
                <div class="stat-label">Protection Rate</div>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-card">
                <div class="chart-title">Daily Protection Volume</div>
                <canvas id="volumeChart" width="400" height="200"></canvas>
            </div>
            <div class="chart-card">
                <div class="chart-title">MEV Attack Types Prevented</div>
                <canvas id="attackChart" width="400" height="200"></canvas>
            </div>
        </div>

        <div class="transactions-table">
            <div class="table-title">Recent Protected Transactions</div>
            <table>
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Transaction Hash</th>
                        <th>Value</th>
                        <th>MEV Saved</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="transactions-tbody">
                    <tr>
                        <td>2 min ago</td>
                        <td>0x1a2b...c3d4</td>
                        <td>$12,450</td>
                        <td>$187.50</td>
                        <td><span class="status-protected">Protected</span></td>
                    </tr>
                    <tr>
                        <td>5 min ago</td>
                        <td>0x5e6f...7g8h</td>
                        <td>$8,920</td>
                        <td>$134.20</td>
                        <td><span class="status-protected">Protected</span></td>
                    </tr>
                    <tr>
                        <td>8 min ago</td>
                        <td>0x9i0j...k1l2</td>
                        <td>$25,600</td>
                        <td>$512.00</td>
                        <td><span class="status-protected">Protected</span></td>
                    </tr>
                    <tr>
                        <td>12 min ago</td>
                        <td>0x3m4n...o5p6</td>
                        <td>$4,780</td>
                        <td>$71.70</td>
                        <td><span class="status-protected">Protected</span></td>
                    </tr>
                    <tr>
                        <td>15 min ago</td>
                        <td>0x7q8r...s9t0</td>
                        <td>$18,340</td>
                        <td>$275.10</td>
                        <td><span class="status-protected">Protected</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <button class="refresh-btn" onclick="refreshData()">üîÑ Refresh Data</button>

    <script>
        // Initialize charts
        const volumeCtx = document.getElementById('volumeChart').getContext('2d');
        const attackCtx = document.getElementById('attackChart').getContext('2d');

        // Volume Chart
        const volumeChart = new Chart(volumeCtx, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Protected Volume ($)',
                    data: [125000, 189000, 156000, 234000, 198000, 267000, 312000],
                    borderColor: '#3498db',
                    backgroundColor: 'rgba(52, 152, 219, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return '$' + (value / 1000) + 'K';
                            }
                        }
                    }
                }
            }
        });

        // Attack Types Chart
        const attackChart = new Chart(attackCtx, {
            type: 'doughnut',
            data: {
                labels: ['Sandwich Attacks', 'Front-running', 'Back-running', 'Liquidation MEV'],
                datasets: [{
                    data: [45, 30, 15, 10],
                    backgroundColor: [
                        '#e74c3c',
                        '#f39c12',
                        '#9b59b6',
                        '#1abc9c'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            usePointStyle: true
                        }
                    }
                }
            }
        });

        // Simulate real-time updates
        function updateStats() {
            const protectedTxs = document.getElementById('protected-txs');
            const totalSavings = document.getElementById('total-savings');
            const preventedAttacks = document.getElementById('prevented-attacks');
            
            // Simulate increasing numbers
            const currentProtected = parseInt(protectedTxs.textContent.replace(',', ''));
            const currentSavings = parseFloat(totalSavings.textContent.replace('$', '').replace(',', ''));
            const currentAttacks = parseInt(preventedAttacks.textContent.replace(',', ''));
            
            // Random increments
            const newProtected = currentProtected + Math.floor(Math.random() * 5) + 1;
            const newSavings = currentSavings + (Math.random() * 1000) + 100;
            const newAttacks = currentAttacks + Math.floor(Math.random() * 3);
            
            protectedTxs.textContent = newProtected.toLocaleString();
            totalSavings.textContent = '$' + Math.floor(newSavings).toLocaleString();
            preventedAttacks.textContent = newAttacks.toLocaleString();
        }

        // Add new transaction to table
        function addNewTransaction() {
            const tbody = document.getElementById('transactions-tbody');
            const newRow = tbody.insertRow(0);
            
            const txHashes = ['0xa1b2...c3d4', '0xe5f6...g7h8', '0xi9j0...k1l2', '0xm3n4...o5p6'];
            const values = [Math.floor(Math.random() * 50000) + 1000];
            const savings = values[0] * (Math.random() * 0.03 + 0.01); // 1-4% savings
            
            newRow.innerHTML = `
                <td>Just now</td>
                <td>${txHashes[Math.floor(Math.random() * txHashes.length)]}</td>
                <td>$${values[0].toLocaleString()}</td>
                <td>$${savings.toFixed(2)}</td>
                <td><span class="status-protected">Protected</span></td>
            `;
            
            // Remove oldest row if more than 10
            if (tbody.rows.length > 10) {
                tbody.deleteRow(-1);
            }
            
            // Update time stamps
            updateTimeStamps();
        }

        function updateTimeStamps() {
            const tbody = document.getElementById('transactions-tbody');
            const timeLabels = ['Just now', '2 min ago', '5 min ago', '8 min ago', '12 min ago', '15 min ago', '18 min ago', '22 min ago', '25 min ago', '28 min ago'];
            
            for (let i = 0; i < tbody.rows.length; i++) {
                tbody.rows[i].cells[0].textContent = timeLabels[i] || `${30 + i * 3} min ago`;
            }
        }

        function refreshData() {
            // Show loading state
            const btn = document.querySelector('.refresh-btn');
            btn.textContent = 'üîÑ Refreshing...';
            btn.disabled = true;
            
            setTimeout(() => {
                updateStats();
                addNewTransaction();
                
                // Update charts with new data
                volumeChart.data.datasets[0].data = volumeChart.data.datasets[0].data.map(val => 
                    val + Math.floor(Math.random() * 10000)
                );
                volumeChart.update();
                
                btn.textContent = 'üîÑ Refresh Data';
                btn.disabled = false;
            }, 1000);
        }

        // Auto-refresh every 30 seconds
        setInterval(() => {
            updateStats();
            if (Math.random() > 0.7) { // 30% chance of new transaction
                addNewTransaction();
            }
        }, 30000);

        // Initial load animation
        setTimeout(() => {
            document.querySelectorAll('.stat-card').forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'all 0.5s ease';
                    
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 100);
                }, index * 100);
            });
        }, 500);

        console.log('üõ°Ô∏è ZK-MEV Protection Dashboard loaded');
        console.log('üìä Monitoring contract: 0x4536227D719E6aB27506E9c3Ec529ea9688D2754');
    </script>
</body>
</html>
